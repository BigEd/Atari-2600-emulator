var state = 0;
self.onmessage = function(event){
    if(state == 0){
        self.postMessage( {"data":[{"x": 0, "y": 0, "r":255, "g":0, "b":0, "a":127}, 
                                   {"x": 0, "y": 1, "r":0, "g":255, "b":0, "a":127}, 
                                   {"x": 1, "y": 0, "r":0, "g":0, "b":255, "a":127}, 
                                   {"x": 1, "y": 1, "r":0, "g":0, "b":0, "a":127}]});
        state++;
    }
    else if(state == 1){
        self.postMessage( {"data":[{"x": 1, "y": 1, "r":255, "g":0, "b":0, "a":127}, 
                                   {"x": 0, "y": 0, "r":0, "g":255, "b":0, "a":127}, 
                                   {"x": 0, "y": 1, "r":0, "g":0, "b":255, "a":127}, 
                                   {"x": 1, "y": 0, "r":0, "g":0, "b":0, "a":127}]});
        state++;
    }
    else if(state == 2){
        self.postMessage( {"data":[{"x": 1, "y": 0, "r":255, "g":0, "b":0, "a":127}, 
                                   {"x": 1, "y": 1, "r":0, "g":255, "b":0, "a":127}, 
                                   {"x": 0, "y": 0, "r":0, "g":0, "b":255, "a":127}, 
                                   {"x": 0, "y": 1, "r":0, "g":0, "b":0, "a":127}]});
        state++;
    }
    else if(state == 3){
        self.postMessage( {"data":[{"x": 0, "y": 1, "r":255, "g":0, "b":0, "a":127}, 
                                   {"x": 1, "y": 0, "r":0, "g":255, "b":0, "a":127}, 
                                   {"x": 1, "y": 1, "r":0, "g":0, "b":255, "a":127}, 
                                   {"x": 0, "y": 0, "r":0, "g":0, "b":0, "a":127}]});
        state = 0;
    }
}
